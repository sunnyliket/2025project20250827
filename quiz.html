<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²½ì£¼ ëœë¤ í€´ì¦ˆ</title>
    <style>
        /* CSS ì½”ë“œëŠ” ì—¬ê¸°ì— ì „ë¶€ í¬í•¨ */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #ffeea9; 
            color: #5D4037;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
            margin: 0;
        }

        .back-button {
            align-self: flex-start;
            margin-bottom: 20px;
            padding: 10px 15px;
            background-color: white;
            text-decoration: none;
            border-radius: 20px;
            border: 1px solid #ddd;
            font-weight: bold;
            color: #5D4037;
        }

        .quiz-container {
            background-color: #fff5cc;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 700px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        #confetti-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }

        .score-tracker {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            background-color: rgba(255, 255, 255, 0.5);
            padding: 10px 20px;
            border-radius: 10px;
        }
        #correct-count {
            color: #28a745;
        }
        #incorrect-count {
            color: #dc3545;
        }

        .progress-container {
            display: flex;
            justify-content: center;
            gap: 6px;
            width: 100%;
            margin-bottom: 20px;
        }

        .progress-dot {
            width: 18px;
            height: 18px;
            background-color: #e0e0e0;
            border-radius: 50%;
            transition: background-color 0.5s;
            flex-shrink: 0; 
        }

        .correct-dot {
            background-color: #28a745;
        }

        .incorrect-dot {
            background-color: #dc3545;
        }

        #question-text {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 30px;
            min-height: 50px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .option-btn {
            padding: 15px;
            font-size: 16px;
            border-radius: 10px;
            border: 2px solid #FBC02D;
            background-color: white;
            color: #5D4037;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
        }

        .option-btn:hover:not([disabled]) {
            background-color: #fdf2d0;
            transform: translateY(-2px);
        }

        .option-btn.correct {
            background-color: #28a745;
            color: white;
            border-color: #28a745;
        }

        .option-btn.incorrect {
            background-color: #dc3545;
            color: white;
            border-color: #dc3545;
        }

        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .feedback {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
            min-height: 25px;
        }

        .next-btn {
            margin-top: 10px;
            padding: 10px 30px;
            font-size: 16px;
            border: none;
            background-color: #FBC02D;
            color: white;
            border-radius: 20px;
            cursor: pointer;
        }

        .result {
            font-size: 24px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-button">â¬…ï¸ ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°</a>
    
    <div class="quiz-container">
        <canvas id="confetti-canvas"></canvas>
        <h1>ğŸ§  ê²½ì£¼ í€´ì¦ˆ</h1>

        <div id="score-tracker" class="score-tracker">
            <span>ë§ì€ ê°œìˆ˜: <span id="correct-count">0</span></span> |
            <span>í‹€ë¦° ê°œìˆ˜: <span id="incorrect-count">0</span></span>
        </div>

        <div id="progress-container" class="progress-container"></div>

        <div id="question-container">
            <p id="question-text">í€´ì¦ˆ ì§ˆë¬¸ì´ ì—¬ê¸°ì— ë‚˜ì˜µë‹ˆë‹¤.</p>
        </div>
        <div id="options-container" class="options-grid"></div>
        <div id="feedback-text" class="feedback"></div>
        <button id="next-button" class="next-btn hidden">ë‹¤ìŒ ë¬¸ì œ</button>
        <div id="result-container" class="result hidden"></div>
    </div>

    <script>
        const allQuestions = [
            { question: "ì‹ ë¼ì˜ ì²« ë²ˆì§¸ ì™•ì€ ëˆ„êµ¬ì¼ê¹Œìš”?", options: ["ê¹€ìœ ì‹ ", "ë°•í˜ê±°ì„¸", "ë¬¸ë¬´ì™•", "ì„ ë•ì—¬ì™•"], answer: 1 },
            { question: "ì‹ ë¼ ì‹œëŒ€ì— ë³„ì„ ê´€ì¸¡í•˜ë˜ ê±´ë¬¼ì˜ ì´ë¦„ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ë¶ˆêµ­ì‚¬", "ì„êµ´ì•”", "ì²¨ì„±ëŒ€", "í¬ì„ì •"], answer: 2 },
            { question: "ë¶ˆêµ­ì‚¬ì— ìˆëŠ” ìœ ëª…í•œ ë‘ ê°œì˜ íƒ‘ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ë‹¤ë³´íƒ‘ê³¼ ì„ê°€íƒ‘", "í™©ë£¡ì‚¬ 9ì¸µ ëª©íƒ‘ê³¼ ë¶„í™©ì‚¬íƒ‘", "ê°ì€ì‚¬ì§€ ì„íƒ‘ê³¼ ê³ ì„ ì‚¬ì§€ ì„íƒ‘", "ë‚˜ì›ë¦¬ 5ì¸µ ì„íƒ‘ê³¼ ì •í˜œì‚¬ì§€ 13ì¸µ ì„íƒ‘"], answer: 0 },
            { question: "í† í•¨ì‚° ì¤‘í„±ì— ì¸ê³µì ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ì„êµ´ ì‚¬ì›ì€ ì–´ë””ì¼ê¹Œìš”?", options: ["ê³¨êµ´ì‚¬", "ê¸°ë¦¼ì‚¬", "ë¶„í™©ì‚¬", "ì„êµ´ì•”"], answer: 3 },
            { question: "ì‹ ë¼ ì‹œëŒ€ ê²½ì£¼ì˜ ì´ë¦„ì€ ë¬´ì—‡ì´ì—ˆì„ê¹Œìš”?", options: ["í•œì–‘", "ì„œë¼ë²Œ", "ì›…ì§„", "ê¸ˆì„±"], answer: 1 },
            { question: "ì™•ìê°€ ê±°ì²˜í•˜ê³  ì—°íšŒë¥¼ ë² í’€ë˜ ë³„ê¶í„°ë¡œ, ì•¼ê²½ì´ ì•„ë¦„ë‹¤ìš´ ì´ê³³ì˜ ë‹¤ë¥¸ ì´ë¦„ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ì•ˆì••ì§€", "ë³´ë¬¸í˜¸", "ë‚˜ì •", "í¬ì„ì •"], answer: 0 },
            { question: "ì‹ ë¼ ì‹œëŒ€ ì™•ë“¤ì˜ ë¬´ë¤ì´ ëª¨ì—¬ìˆëŠ” ëŒ€ë¦‰ì› ì•ˆì— ìˆëŠ” ìœ ëª…í•œ ë¬´ë¤ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ì¥êµ°ì´", "ë¬´ë ¹ì™•ë¦‰", "ì²œë§ˆì´", "ê°•ì„œëŒ€ë¬˜"], answer: 2 },
            { question: "ì‹ ë¼ì˜ í™”ë‘ì€ ì–´ë–¤ ì§‘ë‹¨ì´ì—ˆì„ê¹Œìš”?", options: ["ë†ë¯¼ ë°˜ë€êµ°", "ê·€ì¡± ì²­ì†Œë…„ ìˆ˜ë ¨ ë‹¨ì²´", "ì™•ì‹¤ í˜¸ìœ„ ë¶€ëŒ€", "ë¬´ì—­ ìƒì¸ ì¡°í•©"], answer: 1 },
            { question: "'ì£½ì–´ì„œ ìš©ì´ ë˜ì–´ ë‚˜ë¼ë¥¼ ì§€í‚¤ê² ë‹¤'ë©° ë™í•´ì— ë¬»íŒ ì™•ì€ ëˆ„êµ¬ì¼ê¹Œìš”?", options: ["ì§„í¥ì™•", "ë²•í¥ì™•", "ë¬¸ë¬´ì™•", "íƒœì¢…ë¬´ì—´ì™•"], answer: 2 },
            { question: "ì„±ë•ëŒ€ì™•ì‹ ì¢…ì˜ ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ, ì•„ì´ë¥¼ ì‹œì£¼í•˜ì—¬ ë§Œë“¤ì—ˆë‹¤ëŠ” ì „ì„¤ì´ ìˆëŠ” ì¢…ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ìƒì›ì‚¬ ë™ì¢…", "ì—ë°€ë ˆì¢…", "ë³´ì‹ ê°ì¢…", "í™©ë£¡ì‚¬ëŒ€ì¢…"], answer: 1 },
            { question: "ìµœê·¼ ì Šì€ì´ë“¤ì—ê²Œ ì¸ê¸°ê°€ ë§ìœ¼ë©°, ì˜ˆìœ ì¹´í˜ì™€ ë§›ì§‘ì´ ëª¨ì—¬ìˆëŠ” ê²½ì£¼ì˜ ê±°ë¦¬ëŠ” ì–´ë””ì¼ê¹Œìš”?", options: ["í™©ë¦¬ë‹¨ê¸¸", "ì¸ì‚¬ë™", "ê°ì²œë¬¸í™”ë§ˆì„", "ì „ì£¼í•œì˜¥ë§ˆì„"], answer: 0 },
            { question: "ê²½ì£¼ì— ìˆëŠ” ìŠ¤ë¦´ ë„˜ì¹˜ëŠ” ë†€ì´ê³µì› ì´ë¦„ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ì„œìš¸ëœë“œ", "ê²½ì£¼ì›”ë“œ", "ì—ë²„ëœë“œ", "ë¡¯ë°ì›”ë“œ"], answer: 1 },
            { question: "ì§€ê¸ˆì€ í„°ë§Œ ë‚¨ì•„ìˆì§€ë§Œ, ê³¼ê±° ì‹ ë¼ì—ì„œ ê°€ì¥ ì»¸ë˜ ì ˆì˜ ì´ë¦„ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ë¶ˆêµ­ì‚¬", "ê°ì€ì‚¬", "í™©ë£¡ì‚¬", "ê¸°ë¦¼ì‚¬"], answer: 2 },
            { question: "ë¶ˆêµ­ì‚¬ì™€ ì„êµ´ì•”ì´ ìë¦¬ ì¡ê³  ìˆëŠ” ì‚°ì˜ ì´ë¦„ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ë‚¨ì‚°", "ê¸ˆì˜¤ì‚°", "í† í•¨ì‚°", "ì†Œë°±ì‚°"], answer: 2 },
            { question: "ì‹ ë¼ ìµœì´ˆì˜ ì—¬ì™•ì€ ëˆ„êµ¬ì¼ê¹Œìš”?", options: ["ì§„ì„±ì—¬ì™•", "ì§„ë•ì—¬ì™•", "ì„ ë•ì—¬ì™•", "ì†Œë•ì—¬ì™•"], answer: 2 },
            { question: "ë¶€ì±„ê¼´ ëª¨ì–‘ìœ¼ë¡œ í¼ì³ì§„ ì‹ ë¹„í•œ ë°”ìœ„ ì§€í˜•ì¸ ì–‘ë‚¨ ì£¼ìƒì ˆë¦¬ê°€ ìˆëŠ” ê³³ì€ ì–´ë””ì¼ê¹Œìš”?", options: ["ë™í•´", "ì„œí•´", "ë‚¨í•´", "ë³´ë¬¸í˜¸"], answer: 0 },
            { question: "ì‹ ë¼ ì‹œëŒ€ ì›”ì„±ê³¼ ë‚¨ì‚°ì„ ì—°ê²°í–ˆë˜ ë‹¤ë¦¬ë¡œ, ìµœê·¼ ë³µì›ëœ ë‹¤ë¦¬ì˜ ì´ë¦„ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ì›”ì •êµ", "ê´‘ì•ˆëŒ€êµ", "ì„±ì‚°ëŒ€êµ", "ë§ŒíŒŒì‹ì êµ"], answer: 0 },
            { question: "ì¡°ì„  ì‹œëŒ€ ì–‘ë°˜ë“¤ì˜ ìƒí™œ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆëŠ” ìœ ë„¤ìŠ¤ì½” ì„¸ê³„ë¬¸í™”ìœ ì‚° ë§ˆì„ì€ ì–´ë””ì¼ê¹Œìš”?", options: ["êµì´Œë§ˆì„", "ì•ˆë™ í•˜íšŒë§ˆì„", "ë‚™ì•ˆìì„±", "ì–‘ë™ë§ˆì„"], answer: 3 },
            { question: "ê²½ì£¼ë¥¼ ëŒ€í‘œí•˜ëŠ” ìœ ëª…í•œ ë¹µì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["íŠ€ê¹€ì†Œë³´ë¡œ", "í¬ë¦¼ë¹µ", "í™©ë‚¨ë¹µ", "ë‹¨íŒ¥ë¹µ"], answer: 2 },
            { question: "ì‹ ë¼ì˜ ìˆ˜ë§ì€ ìœ ë¬¼ì„ ì†Œì¥í•˜ê³  ìˆëŠ” êµ­ë¦½ê²½ì£¼ë°•ë¬¼ê´€ì€ ì–´ë”” ì˜†ì— ìˆì„ê¹Œìš”?", options: ["ëŒ€ë¦‰ì›", "ë™ê¶ê³¼ ì›”ì§€", "ë¶ˆêµ­ì‚¬", "ê²½ì£¼ì—­"], answer: 1 },
            { question: "í° í˜¸ìˆ˜ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ í˜¸í…”ê³¼ ë¦¬ì¡°íŠ¸, ê³µì›ì´ ëª¨ì—¬ìˆëŠ” ê²½ì£¼ì˜ ì¢…í•© ê´€ê´‘ë‹¨ì§€ëŠ” ì–´ë””ì¼ê¹Œìš”?", options: ["í•´ìš´ëŒ€", "ë³´ë¬¸ê´€ê´‘ë‹¨ì§€", "ì¤‘ë¬¸ê´€ê´‘ë‹¨ì§€", "ëŒ€ì²œí•´ìˆ˜ìš•ì¥"], answer: 1 },
            { question: "íë¥´ëŠ” ë¬¼ì— ì”ì„ ë„ìš°ê³  ì‹œë¥¼ ìŠìœ¼ë©° ì—°íšŒë¥¼ ì¦ê²¼ë˜ ì‹ ë¼ ì‹œëŒ€ ìœ ì ì§€ëŠ” ì–´ë””ì¼ê¹Œìš”?", options: ["ì²¨ì„±ëŒ€", "ë‚˜ì •", "í¬ì„ì •", "ê¹€ìœ ì‹ ì¥êµ°ë¬˜"], answer: 2 },
            { question: "ì²œë§ˆì´ì—ì„œ ë°œê²¬ëœ ë§ë‹¤ë˜ì— ê·¸ë ¤ì§„ ê·¸ë¦¼ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ë‚˜ëŠ” ë§", "ìš©", "í˜¸ë‘ì´", "ê±°ë¶ì´"], answer: 0 },
            { question: "ê²½ì£¼ì—‘ìŠ¤í¬ëŒ€ê³µì›ì˜ ìƒì§•ì¸ ê²½ì£¼íƒ€ì›ŒëŠ” ë¬´ì—‡ì„ ìŒê°ìœ¼ë¡œ ë””ìì¸í–ˆì„ê¹Œìš”?", options: ["ë‹¤ë³´íƒ‘", "í™©ë£¡ì‚¬ 9ì¸µ ëª©íƒ‘", "ì²¨ì„±ëŒ€", "ì„ê°€íƒ‘"], answer: 1 },
            { question: "ê²½ì£¼ ìµœë¶€ìëŒìœ¼ë¡œ ìœ ëª…í•œ í•œì˜¥ë§ˆì„ì€ ì–´ë””ì¼ê¹Œìš”?", options: ["ì–‘ë™ë§ˆì„", "í™©ë¦¬ë‹¨ê¸¸", "ì„±ë™ì‹œì¥", "êµì´Œë§ˆì„"], answer: 3 },
            { question: "ì‚¼êµ­í†µì¼ì˜ ìœ„ì—…ì„ ë‹¬ì„±í•œ ê¹€ìœ ì‹  ì¥êµ°ì˜ ë¬˜ ì£¼ë³€ì„ ë‘˜ëŸ¬ì‹¸ê³  ìˆëŠ” ë™ë¬¼ ì„ìƒì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ìš©", "í˜¸ë‘ì´", "ì‹­ì´ì§€ì‹ ìƒ", "ì‚¬ì"], answer: 2 },
            { question: "ëŒì„ ë²½ëŒ ëª¨ì–‘ìœ¼ë¡œ ê¹ì•„ ìŒ“ì€ ë…íŠ¹í•œ íƒ‘ì´ ìˆëŠ” ì ˆì€ ì–´ë””ì¼ê¹Œìš”?", options: ["ë¶„í™©ì‚¬", "ë°±ë¥ ì‚¬", "ì‚¬ì²œì™•ì‚¬", "ê°ì€ì‚¬"], answer: 0 },
            { question: "ê²½ì£¼ëŠ” ì–´ë–¤ ë°”ë‹¤ì™€ ì¸ì ‘í•´ ìˆì„ê¹Œìš”?", options: ["ì„œí•´", "ë‚¨í•´", "ë™í•´", "ë°”ë‹¤ê°€ ì—†ë‹¤"], answer: 2 },
            { question: "ì‹ ë¼ì˜ ê±´êµ­ ì‹ í™”ì—ì„œ ë°•í˜ê±°ì„¸ê°€ íƒœì–´ë‚œ ì•Œì„ ë°œê²¬í•œ ê³³ì€ ì–´ë””ì¼ê¹Œìš”?", options: ["ê³„ë¦¼", "ì²œë§ˆì´", "ì˜¤ë¦‰", "ë‚˜ì •"], answer: 3 },
            { question: "ì„ê°€íƒ‘ì„ ë§Œë“¤ì—ˆë‹¤ëŠ” ì „ì„¤ ì† ì„ê³µì˜ ì´ë¦„ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ê¹€ëŒ€ì„±", "ì•„ì‚¬ë‹¬", "ì´ì‚¬ë¶€", "ê±°ì¹ ë¶€"], answer: 1 },
            { question: "ë¶ˆêµ­ì‚¬ ì²­ìš´êµì™€ ë°±ìš´êµëŠ” ì–´ë””ë¡œ í–¥í•˜ëŠ” ë‹¤ë¦¬ì¼ê¹Œìš”?", options: ["ê·¹ë½ì „", "ëŒ€ì›…ì „", "ìí•˜ë¬¸", "ë¬´ì„¤ì „"], answer: 2 }, { question: "ê²½ì£¼ ë‚¨ì‚°ì€ ì•¼ì™¸ ë°•ë¬¼ê´€ì´ë¼ ë¶ˆë¦½ë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ì‹¤ì œ ë°•ë¬¼ê´€ì´ ìˆì–´ì„œ", "ì‚° ì „ì²´ì— ë¶ˆìƒê³¼ íƒ‘ì´ ë§ì•„ì„œ", "ë“±ì‚° ì½”ìŠ¤ê°€ ì˜ ë˜ì–´ ìˆì–´ì„œ", "ë‚¨ì‚°íƒ€ì›Œê°€ ìˆì–´ì„œ"], answer: 1 }, { question: "ì‹ ë¼ì˜ í™”ë ¤í•œ ê¸ˆê´€ì´ ì£¼ë¡œ ë°œê²¬ë˜ëŠ” ë¬´ë¤ ì–‘ì‹ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ê³ ì¸ëŒ", "ëŒë¬´ì§€ë§ë„ë¬´ë¤", "êµ´ì‹ëŒë°©ë¬´ë¤", "ë²½ëŒë¬´ë¤"], answer: 1 }, { question: "ì‹ ë¼ì˜ ì‚¼êµ­í†µì¼ì„ ë„ìš´ ë‹¹ë‚˜ë¼ ì¥ìˆ˜ ì†Œì •ë°©ì˜ ì´ì•¼ê¸°ê°€ ì–½íŒ ê³³ì€ ì–´ë””ì¼ê¹Œìš”?", options: ["ì²¨ì„±ëŒ€", "ì˜¤ë¦‰", "ìš©ì¥ì‚¬ê³¡ ì‚¼ì¸µì„íƒ‘", "ë¬´ì—´ì™•ë¦‰"], answer: 3 }, { question: "ê²½ì£¼ ì‹œë‚´ì— ìˆëŠ” ì‹ ë¼ ì™•ê¶ì˜ í„°ëŠ” ì–´ë””ì¼ê¹Œìš”?", options: ["ê²½ë³µê¶", "ì°½ë•ê¶", "ì›”ì„±", "ì•ˆì••ì§€"], answer: 2 }, { question: "ê²½ì£¼ ìµœì”¨ ê³ íƒì´ ìˆëŠ” êµì´Œë§ˆì„ì—ì„œ ë§›ë³¼ ìˆ˜ ìˆëŠ” ìœ ëª…í•œ ìŒì‹ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["êµë¦¬ê¹€ë°¥", "í•œìš°ë¬¼íšŒ", "ìˆœë‘ë¶€ì°Œê°œ", "ë°€ë©´"], answer: 0 }, { question: "ì‹ ë¼ ì‹œëŒ€ì˜ ê¸ˆìœ¼ë¡œ ë§Œë“  í—ˆë¦¬ë ê°€ ì¶œí† ëœ ë¬´ë¤ì€ ì–´ë””ì¼ê¹Œìš”?", options: ["ê¸ˆê´€ì´", "ì„œë´‰ì´", "í™©ë‚¨ëŒ€ì´", "ê¸ˆë ¹ì´"], answer: 3 }, { question: "ë§ŒíŒŒì‹ì  ì„¤í™”ì™€ ê´€ë ¨ ê¹Šì€ ì¥ì†ŒëŠ” ì–´ë””ì¼ê¹Œìš”?", options: ["ê°ì€ì‚¬ì§€", "í¬ì„ì •", "ë¶ˆêµ­ì‚¬", "ëŒ€ë¦‰ì›"], answer: 0 }, { question: "ê²½ì£¼ì— ìˆëŠ” ì‹ ë¼ë¯¸ìˆ ê´€ì˜ ë‹¤ë¥¸ ì´ë¦„ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ì„ ì¬ë¯¸ìˆ ê´€", "ìš°ì–‘ë¯¸ìˆ ê´€", "í¬í•­ì‹œë¦½ë¯¸ìˆ ê´€", "ëŒ€êµ¬ë¯¸ìˆ ê´€"], answer: 1 }, { question: "ì‹ ë¼ ì‹œëŒ€ í™”ì¥ì¥ìœ¼ë¡œ ì¶”ì •ë˜ëŠ” ë…íŠ¹í•œ ìœ ì ì§€ëŠ” ì–´ë””ì¼ê¹Œìš”?", options: ["ëŠ¥ì§€íƒ‘", "ë¶„í™©ì‚¬", "ë‚˜ì •", "ìˆ­ë•ì „"], answer: 0 }, { question: "ê²½ì£¼ ìì„±ì˜ ë™ë¬¸ ì´ë¦„ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["í–¥ì¼ë¬¸", "ë§ë¯¸ë¬¸", "ì§•ë¡€ë¬¸", "êµ¬ì¶”ë¬¸"], answer: 0 }, { question: "ì„ ë•ì—¬ì™• ì‹œê¸°ì— ì°½ê±´ëœ, 'í™©ì œì˜ ìš©ì´ ì‚¬ëŠ” ì ˆ'ì´ë¼ëŠ” ëœ»ì˜ ì‚¬ì°°ì€ ì–´ë””ì¼ê¹Œìš”?", options: ["í™©ë£¡ì‚¬", "ë¶„í™©ì‚¬", "ê¸°ë¦¼ì‚¬", "ë¶ˆêµ­ì‚¬"], answer: 0 }, { question: "ì„ê°€íƒ‘ ì•ˆì—ì„œ ë°œê²¬ëœ ì„¸ê³„ì—ì„œ ê°€ì¥ ì˜¤ë˜ëœ ëª©íŒ ì¸ì‡„ë¬¼ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ì§ì§€ì‹¬ì²´ìš”ì ˆ", "ì™•ì˜¤ì²œì¶•êµ­ì „", "ë¬´êµ¬ì •ê´‘ëŒ€ë‹¤ë¼ë‹ˆê²½", "ì‚¼êµ­ìœ ì‚¬"], answer: 2 }, { question: "ê²½ì£¼ ê¹€ì”¨ì˜ ì‹œì¡°ì¸ ê¹€ì•Œì§€ê°€ íƒœì–´ë‚¬ë‹¤ëŠ” ì „ì„¤ì´ ìˆëŠ” ìˆ²ì€ ì–´ë””ì¼ê¹Œìš”?", options: ["ê³„ë¦¼", "ì‚¼ë¦‰ìˆ²", "ì˜¤ë¦‰ìˆ²", "í™©ì„±ê³µì›"], answer: 0 }, { question: "ê²½ì£¼ ë™í•´ì•ˆì˜ ìì²œí•­ ê°¤ëŸ¬ë¦¬ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ì¡°ê°ìƒ", "ë²½í™”", "ì„¤ì¹˜ë¯¸ìˆ ", "ì‚¬ì§„"], answer: 1 }, { question: "ì‹ ë¼ ì‹œëŒ€ì˜ ìš°ë¬¼ë¡œ, ë‚˜ë¼ì— í° ì¼ì´ ìˆì„ ë•Œë§ˆë‹¤ ë¬¼ ìƒ‰ì´ ë³€í–ˆë‹¤ëŠ” ì „ì„¤ì´ ìˆëŠ” ê³³ì€ ì–´ë””ì¼ê¹Œìš”?", options: ["ë‚˜ì •", "ê³„ë¦¼", "ì•Œì˜ì •", "ì¬ë§¤ì •"], answer: 3 }, { question: "ê²½ì£¼ì— ìœ„ì¹˜í•œ ë™êµ­ëŒ€í•™êµ ìº í¼ìŠ¤ ì•ˆì— ìˆëŠ” ìœ ì ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ì„ë¹™ê³ ", "ì²¨ì„±ëŒ€", "ì˜¤ë¦‰", "í¬ì„ì •"], answer: 0 }, { question: "ì‹ ë¼ì˜ ë§ˆì§€ë§‰ ì™•ì¸ ê²½ìˆœì™•ì˜ ì´ë¦„ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ê¹€ë¶€", "ê¹€ì¶˜ì¶”", "ê¹€ë²•ë¯¼", "ê¹€ì•Œì§€"], answer: 0 }, { question: "ê²½ì£¼ì—ì„œ ì—´ë¦¬ëŠ” ëŒ€í‘œì ì¸ ë§ˆë¼í†¤ ëŒ€íšŒì˜ ì´ë¦„ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ê²½ì£¼ ë²šê½ƒ ë§ˆë¼í†¤", "ì„œìš¸ êµ­ì œ ë§ˆë¼í†¤", "ì¶˜ì²œ ë§ˆë¼í†¤", "ê³µì£¼ ë°±ì œ ë§ˆë¼í†¤"], answer: 0 }, { question: "ê³¨êµ´ì‚¬ëŠ” ë¬´ì—‡ìœ¼ë¡œ ìœ ëª…í• ê¹Œìš”?", options: ["ëª©íƒ‘", "ì„êµ´ì‚¬ì›ê³¼ ì„ ë¬´ë„", "ë²½í™”", "ë²”ì¢…"], answer: 1 }, { question: "ê²½ì£¼ ë³´ë¬¸ë‹¨ì§€ì˜ ë¬¼ì„ ê³µê¸‰í•˜ëŠ” ëŒì˜ ì´ë¦„ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ë•ë™ëŒ", "ì•ˆë™ëŒ", "ì†Œì–‘ê°•ëŒ", "ì¶©ì£¼ëŒ"], answer: 0 }, { question: "ì‹ ë¼ì˜ í™”ë°±íšŒì˜ê°€ ì—´ë ¸ë‹¤ê³  ì „í•´ì§€ëŠ” ë„¤ ê³³ì˜ ì˜ì§€ ì¤‘ í•˜ë‚˜ëŠ” ì–´ë””ì¼ê¹Œìš”?", options: ["ì˜¤ë¦‰", "ë‚˜ì •", "ì„œì¶œì§€", "ì²­ë ¹ì‚°"], answer: 1 }, { question: "ê²½ì£¼ì—ì„œë§Œ ë§›ë³¼ ìˆ˜ ìˆëŠ” íŠ¹ë³„í•œ í•´ì¥êµ­ì€ ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ì½©ë‚˜ë¬¼êµ­ë°¥", "ë¼ˆí•´ì¥êµ­", "ë¬µí•´ì¥êµ­", "ì„ ì§€í•´ì¥êµ­"], answer: 2 }, { question: "ì´ì°¨ëˆì˜ ìˆœêµì™€ ê´€ë ¨ëœ ì‚¬ì°°ì€ ì–´ë””ì¼ê¹Œìš”?", options: ["ìì¶”ì‚¬(ë°±ë¥ ì‚¬)", "í™©ë£¡ì‚¬", "í¥ë¥œì‚¬", "ì˜ë¬˜ì‚¬"], answer: 0 }, { question: "ê²½ì£¼ ë‚¨ì‚°ì˜ ì‚¼ë¦‰ê³„ê³¡ì— ìˆëŠ” ì„¸ ì™•ë¦‰ì„ ë¬´ì—‡ì´ë¼ ë¶€ë¥¼ê¹Œìš”?", options: ["ì˜¤ë¦‰", "ì‚¼ë¦‰", "ê³ ë¶„êµ°", "ì™•ë¦‰"], answer: 1 }, { question: "ê²½ì£¼ë¥¼ 'ë‹¬ë¦¬ëŠ” ë°•ë¬¼ê´€'ì´ë¼ê³  ë¶€ë¥´ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?", options: ["ë°•ë¬¼ê´€ì´ ë§ì•„ì„œ", "ë›°ì–´ë‹¤ë‹ˆë©° êµ¬ê²½í•´ì•¼ í•´ì„œ", "ë„ì‹œ ì „ì²´ê°€ ìœ ì ì§€ë¼ì„œ", "ë²„ìŠ¤ê°€ ë§ì•„ì„œ"], answer: 2 }, { question: "ê´˜ë¦‰ì˜ ë¬´ì¸ì„ìƒì€ ì–´ëŠ ë‚˜ë¼ ì‚¬ëŒì˜ ëª¨ìŠµì„ í•˜ê³  ìˆì„ê¹Œìš”?", options: ["ì¤‘êµ­", "ì¼ë³¸", "ì„œì—­(ì•„ë¼ë¹„ì•„)", "ê³ êµ¬ë ¤"], answer: 2 }, { question: "ì‹ ë¼ ì‹œëŒ€ì˜ ì‹œì¥í„°ë¡œ ì¶”ì •ë˜ëŠ” ê³³ì€ ì–´ë””ì¼ê¹Œìš”?", options: ["ë™ê¶ê³¼ ì›”ì§€", "í™©ë¦¬ë‹¨ê¸¸", "ì„±ë™ì‹œì¥", "ë™ì‹œì™€ ì„œì‹œ"], answer: 3 }, { question: "ê²½ì£¼ì— ìˆëŠ” 'ìª½ìƒ˜ì§€êµ¬'ëŠ” ë¬´ì—‡ì„ í•˜ëŠ” ê³³ì¼ê¹Œìš”?", options: ["ìœ ì  ë°œêµ´ ë° ì—°êµ¬", "ê³µì›", "ì‡¼í•‘ì„¼í„°", "ì „í†µì‹œì¥"], answer: 0 }, { question: "ì—¬ë¦„ì— ì—°ê½ƒìœ¼ë¡œ ê°€ë“ ì°¨ëŠ” ë™ê¶ê³¼ ì›”ì§€ ì˜†ì˜ ì—°ëª»ì€ ì–´ë””ì¼ê¹Œìš”?", options: ["ë³´ë¬¸í˜¸", "ì•ˆì••ì§€", "ì—°ì§€", "ì˜¤ë¦¬ì—°ëª»"], answer: 2 }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            const questionTextElem = document.getElementById('question-text');
            const optionsContainerElem = document.getElementById('options-container');
            const feedbackTextElem = document.getElementById('feedback-text');
            const nextButtonElem = document.getElementById('next-button');
            const resultContainerElem = document.getElementById('result-container');
            const progressContainerElem = document.getElementById('progress-container');
            const correctCountElem = document.getElementById('correct-count');
            const incorrectCountElem = document.getElementById('incorrect-count');
            const confettiCanvas = document.getElementById('confetti-canvas');
            const ctx = confettiCanvas.getContext('2d');

            let currentQuestionIndex = 0;
            let score = 0;
            let incorrectCount = 0;
            let quizQuestions = [];
            let confettiParticles = [];

            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }

            function startQuiz() {
                shuffleArray(allQuestions);
                quizQuestions = allQuestions.slice(0, 5);

                currentQuestionIndex = 0;
                score = 0;
                incorrectCount = 0; 
                updateScoreTracker(); 
                nextButtonElem.textContent = "ë‹¤ìŒ ë¬¸ì œ";
                resultContainerElem.classList.add('hidden');
                
                // ==================== ì˜¤ë¥˜ ìˆ˜ì •: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ê´€ë¦¬ ====================
                // ê¸°ì¡´ í•¸ë“¤ëŸ¬ë¥¼ ì œê±°í•˜ê³  ìƒˆë¡œ ì„¤ì •í•˜ì—¬ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
                nextButtonElem.removeEventListener('click', handleNextButtonClick);
                nextButtonElem.removeEventListener('click', startQuiz);
                nextButtonElem.addEventListener('click', handleNextButtonClick);
                // =====================================================================
                
                progressContainerElem.innerHTML = '';
                for (let i = 0; i < quizQuestions.length; i++) {
                    const dot = document.createElement('div');
                    dot.classList.add('progress-dot');
                    dot.id = `dot-${i}`;
                    progressContainerElem.appendChild(dot);
                }
                
                showQuestion();
            }

            function showQuestion() {
                resetState();
                const currentQuestion = quizQuestions[currentQuestionIndex];
                questionTextElem.textContent = `${currentQuestionIndex + 1}. ${currentQuestion.question}`;
                
                currentQuestion.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.classList.add('option-btn');
                    button.addEventListener('click', () => selectAnswer(index));
                    optionsContainerElem.appendChild(button);
                });
            }

            function resetState() {
                nextButtonElem.classList.add('hidden');
                feedbackTextElem.textContent = '';
                while (optionsContainerElem.firstChild) {
                    optionsContainerElem.removeChild(optionsContainerElem.firstChild);
                }
            }

            function selectAnswer(selectedIndex) {
                const currentQuestion = quizQuestions[currentQuestionIndex];
                const correct = selectedIndex === currentQuestion.answer;
                
                const currentDot = document.getElementById(`dot-${currentQuestionIndex}`);

                if (correct) {
                    score++;
                    feedbackTextElem.textContent = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰";
                    feedbackTextElem.style.color = '#28a745';
                    currentDot.classList.add('correct-dot');
                } else {
                    incorrectCount++;
                    feedbackTextElem.textContent = `í‹€ë ¸ì–´ìš”. ì •ë‹µì€ '${currentQuestion.options[currentQuestion.answer]}'ì…ë‹ˆë‹¤.`;
                    feedbackTextElem.style.color = '#dc3545';
                    currentDot.classList.add('incorrect-dot');
                }
                
                updateScoreTracker(); 

                Array.from(optionsContainerElem.children).forEach((button, index) => {
                    if (index === currentQuestion.answer) {
                        button.classList.add('correct');
                    } else if (index === selectedIndex) {
                        button.classList.add('incorrect');
                    }
                    button.disabled = true;
                });

                nextButtonElem.classList.remove('hidden');
            }
            
            function updateScoreTracker() {
                correctCountElem.textContent = score;
                incorrectCountElem.textContent = incorrectCount;
            }

            function showResults() {
                resetState();
                questionTextElem.textContent = "í€´ì¦ˆ ë!";
                resultContainerElem.innerHTML = `<h2>ìµœì¢… ì ìˆ˜</h2><p>ì´ ${quizQuestions.length}ë¬¸ì œ ì¤‘ ${score}ë¬¸ì œë¥¼ ë§í˜”ì–´ìš”!</p>`;
                resultContainerElem.classList.remove('hidden');
                nextButtonElem.textContent = "ë‹¤ì‹œ í’€ê¸°";
                nextButtonElem.classList.remove('hidden');
                
                // ==================== ì˜¤ë¥˜ ìˆ˜ì •: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ê´€ë¦¬ ====================
                nextButtonElem.removeEventListener('click', handleNextButtonClick);
                nextButtonElem.addEventListener('click', startQuiz, { once: true }); // í•œë²ˆë§Œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •
                // =====================================================================

                if (score === quizQuestions.length) {
                    resultContainerElem.innerHTML += `<p>ğŸ‰ ì™„ë²½í•´ìš”! ê²½ì£¼ ì „ë¬¸ê°€ ìŠ¤íƒ¬í”„ê°€ ì ê¸ˆ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ¥³</p>`;
                    localStorage.setItem('gyeongjuExpertUnlocked', 'true');
                    triggerConfetti();
                }
            }
            
            function handleNextButtonClick() {
                currentQuestionIndex++;
                if (currentQuestionIndex < quizQuestions.length) {
                    showQuestion();
                } else {
                    showResults();
                }
            }

            function triggerConfetti() {
                confettiCanvas.width = confettiCanvas.parentElement.offsetWidth;
                confettiCanvas.height = confettiCanvas.parentElement.offsetHeight;
                confettiParticles = [];
                for (let i = 0; i < 100; i++) {
                    confettiParticles.push(createParticle());
                }
                animateConfetti();
            }

            function createParticle() {
                const x = Math.random() * confettiCanvas.width;
                const y = Math.random() * confettiCanvas.height - confettiCanvas.height;
                const size = Math.random() * 5 + 2;
                const color = `hsl(${Math.random() * 360}, 100%, 50%)`;
                const speed = Math.random() * 3 + 2;
                return { x, y, size, color, speed };
            }

            function animateConfetti() {
                ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
                confettiParticles.forEach((p, index) => {
                    p.y += p.speed;
                    ctx.fillStyle = p.color;
                    ctx.fillRect(p.x, p.y, p.size, p.size * 2);
                    if (p.y > confettiCanvas.height) {
                        confettiParticles.splice(index, 1);
                    }
                });
                if (confettiParticles.length > 0) {
                    requestAnimationFrame(animateConfetti);
                }
            }

            startQuiz();
        });
    </script>
</body>
</html>
