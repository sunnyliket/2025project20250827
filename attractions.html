<!DOCTYPE html>
<html>
<head>
    <title>ê²½ì£¼ ëª…ì†Œ ì°¾ê¸°</title>
    <style>
        /* attractions.cssì˜ ëª¨ë“  ë‚´ìš©ì„ ì—¬ê¸°ì— í¬í•¨ */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #ffeea9; 
            text-align: center;
        }

        .back-button {
            display: inline-block;
            margin: 20px;
            padding: 10px 15px;
            background-color: white;
            color: #5D4037;
            text-decoration: none;
            border-radius: 20px;
            border: 1px solid #ddd;
            font-weight: bold;
        }

        h1 {
            color: #5D4037; 
        }

        .search-box {
            margin-bottom: 30px;
        }

        #searchInput {
            width: 300px;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 20px;
            font-size: 16px;
        }

        .search-box button {
            padding: 10px 15px;
            border: none;
            background-color: #FBC02D; 
            color: white;
            border-radius: 20px;
            font-size: 16px;
            cursor: pointer;
        }

        .search-box button:hover {
            background-color: #F9A825;
        }

        .attraction-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            padding: 0 20px;
        }

        .attraction-item {
            position: relative;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 20px;
            width: 280px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .attraction-item:hover {
            transform: scale(1.05);
        }

        .attraction-item img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 10px;
        }

        .attraction-item h2 {
            color: #5D4037;
        }
        
        .attraction-item p {
            color: #7f8c8d;
            font-size: 14px;
        }

        .hidden {
            display: none;
        }

        .favorite-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            z-index: 5; 
            padding: 5px;
            line-height: 1;
            filter: grayscale(100%);
            opacity: 0.5;
            transition: all 0.2s ease;
        }

        .favorite-btn.favorited {
            filter: grayscale(0%);
            opacity: 1;
        }
        
        .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); }
        .modal-content { background-color: #fff5cc; margin: 10% auto; padding: 25px; border-radius: 15px; width: 90%; max-width: 500px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); text-align: center; position: relative; }
        .modal-close-btn { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; }
        #modal-img { width: 100%; height: 250px; object-fit: cover; border-radius: 10px; margin-bottom: 15px; }
        #modal-review { width: 100%; height: 100px; padding: 10px; box-sizing: border-box; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; resize: vertical; margin-bottom: 15px; }
        .modal-save-btn { padding: 10px 25px; border: none; background-color: #FBC02D; color: white; border-radius: 20px; font-size: 16px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <a href="index.html" class="back-button">â¬…ï¸ ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°</a>
    <h1>âœ¨ ê²½ì£¼ ëª…ì†Œ ëª©ë¡ âœ¨</h1>
    <div class="search-box">
        <input type="text" id="searchInput" placeholder="ëª…ì†Œ ì´ë¦„ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”...">
        <button onclick="searchAttractions()">ğŸ” ê²€ìƒ‰</button>
    </div>
    
    <div class="attraction-list">
        <div class="attraction-item" onclick="openAttractionModal('ì²¨ì„±ëŒ€', 'https://www.gjne.go.kr/upload/boardManagement/contents/202102/20210203050047_67812.jpg')">
            <button class="favorite-btn" onclick="toggleFavorite('ì²¨ì„±ëŒ€', event)">â­</button>
            <img src="https://www.gjne.go.kr/upload/boardManagement/contents/202102/20210203050047_67812.jpg" alt="ì²¨ì„±ëŒ€ ì‚¬ì§„">
            <h2>ì²¨ì„±ëŒ€</h2>
            <p>ì‹ ë¼ ì‹œëŒ€ì— ë³„ì„ ê´€ì¸¡í•˜ë˜ ê³³</p>
        </div>
        <div class="attraction-item" onclick="openAttractionModal('ë¶ˆêµ­ì‚¬', 'https://www.gjne.go.kr/upload/boardManagement/contents/202102/20210203050018_96504.jpg')">
            <button class="favorite-btn" onclick="toggleFavorite('ë¶ˆêµ­ì‚¬', event)">â­</button>
            <img src="https://www.gjne.go.kr/upload/boardManagement/contents/202102/20210203050018_96504.jpg" alt="ë¶ˆêµ­ì‚¬ ì‚¬ì§„">
            <h2>ë¶ˆêµ­ì‚¬</h2>
            <p>ì•„ë¦„ë‹¤ìš´ ì‹ ë¼ì˜ ì ˆ</p>
        </div>
        <div class="attraction-item" onclick="openAttractionModal('ë™ê¶ê³¼ ì›”ì§€', 'https://www.gyeongju.go.kr/open_content/images/tour/tour_heritage_img04.jpg')">
            <button class="favorite-btn" onclick="toggleFavorite('ë™ê¶ê³¼ ì›”ì§€', event)">â­</button>
            <img src="https://www.gyeongju.go.kr/open_content/images/tour/tour_heritage_img04.jpg" alt="ë™ê¶ê³¼ ì›”ì§€ ì‚¬ì§„">
            <h2>ë™ê¶ê³¼ ì›”ì§€</h2>
            <p>ë°¤ì— ë³´ë©´ ë”ìš± ì•„ë¦„ë‹¤ìš´ ì—°ëª»</p>
        </div>
        <div class="attraction-item" onclick="openAttractionModal('ì„êµ´ì•”', 'https://images.chosun.com/resizer/lHq-sL5G2j-3y8L-Mv-iS6D_PlE=/616x0/filters:focal(294x191:304x201)/cloudfront-ap-northeast-1.images.arcpublishing.com/chosun/J627Y47FR5CFZPVX2QFYAF7D4E.jpg')">
            <button class="favorite-btn" onclick="toggleFavorite('ì„êµ´ì•”', event)">â­</button>
            <img src="https://images.chosun.com/resizer/lHq-sL5G2j-3y8L-Mv-iS6D_PlE=/616x0/filters:focal(294x191:304x201)/cloudfront-ap-northeast-1.images.arcpublishing.com/chosun/J627Y47FR5CFZPVX2QFYAF7D4E.jpg" alt="ì„êµ´ì•” ì‚¬ì§„">
            <h2>ì„êµ´ì•”</h2>
            <p>ëŒ ë™êµ´ ì† ê±°ëŒ€í•œ ë¶€ì²˜ë‹˜</p>
        </div>
        <div class="attraction-item" onclick="openAttractionModal('ëŒ€ë¦‰ì›', 'https://www.heritage.go.kr/images/content/palace/royal_tomb_pl_img0201_2.jpg')">
            <button class="favorite-btn" onclick="toggleFavorite('ëŒ€ë¦‰ì›', event)">â­</button>
            <img src="https://www.heritage.go.kr/images/content/palace/royal_tomb_pl_img0201_2.jpg" alt="ëŒ€ë¦‰ì› ì‚¬ì§„">
            <h2>ëŒ€ë¦‰ì›</h2>
            <p>ì™•ë“¤ì˜ ì»¤ë‹¤ë€ ë¬´ë¤ì´ ëª¨ì¸ ê³µì›</p>
        </div>
        <div class="attraction-item" onclick="openAttractionModal('êµ­ë¦½ê²½ì£¼ë°•ë¬¼ê´€', 'https://www.museum.go.kr/gyeongju/upload/ckeditor/2022091410114056299.jpg')">
            <button class="favorite-btn" onclick="toggleFavorite('êµ­ë¦½ê²½ì£¼ë°•ë¬¼ê´€', event)">â­</button>
            <img src="https://www.museum.go.kr/gyeongju/upload/ckeditor/2022091410114056299.jpg" alt="êµ­ë¦½ê²½ì£¼ë°•ë¬¼ê´€ ì‚¬ì§„">
            <h2>êµ­ë¦½ê²½ì£¼ë°•ë¬¼ê´€</h2>
            <p>ì‹ ë¼ ì‹œëŒ€ì˜ ë³´ë¬¼ì„ ë³¼ ìˆ˜ ìˆëŠ” ê³³</p>
        </div>
        <div class="attraction-item" onclick="openAttractionModal('ì›”ì •êµ', 'https://www.gyeongju.go.kr/open_content/images/tour/rest_img01.jpg')">
            <button class="favorite-btn" onclick="toggleFavorite('ì›”ì •êµ', event)">â­</button>
            <img src="https://www.gyeongju.go.kr/open_content/images/tour/rest_img01.jpg" alt="ì›”ì •êµ ì‚¬ì§„">
            <h2>ì›”ì •êµ</h2>
            <p>ë°¤ì— ë¶ˆ ì¼œì§€ë©´ ì •ë§ ì˜ˆìœ ë‹¤ë¦¬</p>
        </div>
        <div class="attraction-item" onclick="openAttractionModal('í™©ë¦¬ë‹¨ê¸¸', 'https://a.cdn-hotels.com/gdcs/production163/d26/89461149-a2e5-4e33-89a1-71337c73a30c.jpg')">
            <button class="favorite-btn" onclick="toggleFavorite('í™©ë¦¬ë‹¨ê¸¸', event)">â­</button>
            <img src="https://a.cdn-hotels.com/gdcs/production163/d26/89461149-a2e5-4e33-89a1-71337c73a30c.jpg" alt="í™©ë¦¬ë‹¨ê¸¸ ì‚¬ì§„">
            <h2>í™©ë¦¬ë‹¨ê¸¸</h2>
            <p>ì˜ˆìœ ê°€ê²Œì™€ ë§›ì§‘ì´ ë§ì€ ê±°ë¦¬</p>
        </div>
        <div class="attraction-item" onclick="openAttractionModal('ì–‘ë™ë§ˆì„', 'https://www.gyeongju.go.kr/open_content/images/tour/tour_heritage_img02.jpg')">
            <button class="favorite-btn" onclick="toggleFavorite('ì–‘ë™ë§ˆì„', event)">â­</button>
            <img src="https://www.gyeongju.go.kr/open_content/images/tour/tour_heritage_img02.jpg" alt="ì–‘ë™ë§ˆì„ ì‚¬ì§„">
            <h2>ì–‘ë™ë§ˆì„</h2>
            <p>ì˜›ë‚  ì–‘ë°˜ë“¤ì´ ì‚´ë˜ ë¯¼ì† ë§ˆì„</p>
        </div>
    </div>
    
    <div id="attractionModal" class="modal">
        <div class="modal-content">
            <span class="modal-close-btn" onclick="closeAttractionModal()">&times;</span>
            <img id="modal-img" src="" alt="ëª…ì†Œ ì‚¬ì§„">
            <h2 id="modal-title">ëª…ì†Œ ì´ë¦„</h2>
            <textarea id="modal-review" placeholder="ë‚˜ë§Œì˜ ì†Œê°ì„ ê¸°ë¡í•´ë³´ì„¸ìš”..."></textarea>
            <button id="save-btn" class="modal-save-btn">ì†Œê° ì €ì¥í•˜ê¸°</button>
        </div>
    </div>
    
    <script>
        // attractions.jsì˜ ëª¨ë“  ë‚´ìš©ì„ ì—¬ê¸°ì— í¬í•¨
        function searchAttractions() {
            let searchText = document.getElementById('searchInput').value.toLowerCase();
            let attractionItems = document.querySelectorAll('.attraction-item');

            attractionItems.forEach(function(item) {
                let title = item.querySelector('h2').textContent.toLowerCase();
                if (title.includes(searchText)) {
                    item.classList.remove('hidden');
                } else {
                    item.classList.add('hidden');
                }
            });
        }

        const modal = document.getElementById('attractionModal');
        const modalImg = document.getElementById('modal-img');
        const modalTitle = document.getElementById('modal-title');
        const modalReview = document.getElementById('modal-review');
        const saveBtn = document.getElementById('save-btn');
        let currentAttractionName = ''; 

        function openAttractionModal(name, imageUrl) {
            currentAttractionName = name; 
            modalImg.src = imageUrl;
            modalTitle.textContent = name;
            const savedReview = localStorage.getItem(`review_${name}`);
            modalReview.value = savedReview || '';
            modal.style.display = 'block';
        }

        function closeAttractionModal() {
            modal.style.display = 'none';
        }

        saveBtn.onclick = function() {
            const reviewText = modalReview.value;
            localStorage.setItem(`review_${currentAttractionName}`, reviewText);
            alert('ì†Œê°ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
            closeAttractionModal();
        }

        function toggleFavorite(name, event) {
            event.stopPropagation(); 

            let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
            const starButton = event.target;

            if (favorites.includes(name)) {
                favorites = favorites.filter(fav => fav !== name);
                starButton.classList.remove('favorited');
            } else {
                favorites.push(name);
                starButton.classList.add('favorited');
            }
            localStorage.setItem('favorites', JSON.stringify(favorites));
        }

        function updateFavoriteStars() {
            const favorites = JSON.parse(localStorage.getItem('favorites')) || [];
            const attractionItems = document.querySelectorAll('.attraction-item');

            attractionItems.forEach(item => {
                const name = item.querySelector('h2').textContent;
                const starButton = item.querySelector('.favorite-btn');
                
                if (favorites.includes(name)) {
                    starButton.classList.add('favorited');
                } else {
                    starButton.classList.remove('favorited');
                }
            });
        }

        document.addEventListener('DOMContentLoaded', updateFavoriteStars);

        window.addEventListener('click', function(event) {
            if (event.target == modal) {
                closeAttractionModal();
            }
        });

        // global.jsì˜ ìŒì„± ì•ˆë‚´ ê¸°ëŠ¥ì„ ì—¬ê¸°ì— í¬í•¨ (ì„ íƒ ì‚¬í•­)
        document.addEventListener('click', function(event) {
            const isVoiceEnabled = localStorage.getItem('voiceGuideEnabled') === 'true';
            if (!isVoiceEnabled) return;
            const targetElement = event.target.closest('a, button, .attraction-item');
            if (targetElement) {
                let textToSpeak = targetElement.textContent.trim();
                if (textToSpeak) {
                    window.speechSynthesis.cancel();
                    const utterance = new SpeechSynthesisUtterance(textToSpeak);
                    utterance.lang = 'ko-KR';
                    window.speechSynthesis.speak(utterance);
                }
            }
        });
    </script>
</body>
</html>